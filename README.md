# 🛡️ نظام إدارة الكوكيز الاحترافي للأفلييت

## 📋 نظرة عامة

نظام متقدم ومحترف لإدارة الكوكيز الخاصة بالأفلييت، يوفر حماية قوية لمدة 24 ساعة مع نظام تغليب ذكي للروابط المنافسة.

## ✨ الميزات الرئيسية

- 🎯 **واجهة إدارية احترافية** لإنشاء روابط التتبع
- 🛡️ **حماية قوية للكوكيز** لمدة 24 ساعة
- 🔄 **نظام تغليب تلقائي** للروابط المنافسة
- 📱 **تصميم متجاوب** يعمل على جميع الأجهزة
- 🚀 **أداء عالي** مع مراقبة ذكية للروابط
- 📊 **إحصائيات شاملة** لحالة النظام

## 🏗️ هيكل المشروع

```
affiliate_cookie_manager/
├── affiliate_cookie_manager.html    # الواجهة الإدارية
├── amazon_cookie_system.js          # النظام الذي يعمل على Amazon
└── README.md                        # دليل الاستخدام
```

## 🚀 كيفية الاستخدام

### 1. الواجهة الإدارية

1. **افتح الملف** `affiliate_cookie_manager.html` في المتصفح
2. **أدخل رابط المنتج** من Amazon في الحقل المخصص
3. **اضغط "إنشاء رابط التتبع"** لإنشاء الرابط المحمي
4. **انسخ الرابط** وشاركه مع المستخدمين

### 2. تفعيل النظام

1. **اضغط "🛡️ تفعيل النظام"** لتفعيل الحماية
2. **راقب الإحصائيات** لمعرفة حالة النظام
3. **استخدم "🧪 اختبار التغليب"** لاختبار النظام

### 3. النظام على Amazon

1. **احقن الملف** `amazon_cookie_system.js` في صفحات Amazon
2. **ستظهر واجهة الكوكيز** تلقائياً
3. **اضغط "قبول"** لتفعيل الحماية
4. **النظام يعمل تلقائياً** لحماية الكوكيز

## 🔧 الإعدادات

### معرفات الأفلييت

```javascript
const SYSTEM_CONFIG = {
    affiliateId: 'yajnyeg-21',        // معرف الأفلييت
    linkCode: 'ur2',                  // نوع الرابط
    linkId: '4ff5fa11b6d0385e8811d3e183795133',  // معرف الرابط
    camp: '247',                      // معرف الحملة
    creative: '1211',                 // معرف الإبداع
    ascsubtag: '57854327'            // المعرف الفرعي
};
```

### مدة الكوكيز

```javascript
const cookieDuration = 24 * 60 * 60 * 1000; // 24 ساعة
```

## 🛡️ آلية الحماية

### 1. اكتشاف الروابط المنافسة

النظام يتعرف على الروابط المنافسة بناءً على:
- **معرف الأفلييت** (`tag`)
- **المعرف الفرعي** (`ascsubtag`)
- **معرف الرابط** (`linkId`)

### 2. التغليب التلقائي

- **تعديل الروابط** تلقائياً لاستخدام معرفك
- **إضافة معاملات الحماية** (`override=true`, `protected=true`)
- **إنشاء معرفات فريدة** لكل رابط

### 3. حماية الكوكيز

- **حفظ الكوكيز** مع خصائص أمان متقدمة
- **إزالة الكوكيز المنافسة** تلقائياً
- **حماية من التلاعب** باستخدام `SameSite=Strict`

## 📱 الواجهة الإدارية

### الأقسام الرئيسية

1. **🔗 إدخال رابط المنتج**
   - حقل لإدخال رابط Amazon
   - زر إنشاء رابط التتبع

2. **📊 الإحصائيات**
   - إجمالي الروابط المنشأة
   - الكوكيز النشطة
   - الوقت المتبقي
   - معدل التغليب

3. **📋 حالة النظام**
   - حالة الكوكيز
   - نظام التغليب
   - حماية الكوكيز
   - آخر تحديث

4. **🛠️ أزرار الإجراءات**
   - تفعيل النظام
   - معلومات النظام
   - إعادة تعيين

## 🔍 مراقبة الروابط

### آلية المراقبة

1. **MutationObserver** لمراقبة التغييرات في DOM
2. **مراقبة النقر** على الروابط
3. **فحص الروابط الحالية** في الصفحة
4. **إعادة التفعيل** عند تغيير الصفحة

### المؤشرات البصرية

- **🛡️ علامة خضراء** على الروابط المحمية
- **رسائل التغليب** عند اكتشاف روابط منافسة
- **مؤشر الحالة** يعرض الوقت المتبقي

## 🧪 الاختبار

### روابط الاختبار

النظام يتضمن روابط اختبار لاختبار:
- **الروابط المنافسة** مع معرفات مختلفة
- **الروابط الجديدة** مع ascsubtag مختلف
- **نظام التغليب** التلقائي

### خطوات الاختبار

1. **افتح الواجهة الإدارية**
2. **اضغط "🧪 اختبار التغليب"**
3. **انقر على الروابط المختلفة**
4. **راقب رسائل التغليب**

## 🚨 استكشاف الأخطاء

### مشاكل شائعة

1. **لا تظهر واجهة الكوكيز**
   - تأكد من تحميل الصفحة بالكامل
   - تحقق من إعدادات JavaScript

2. **لا يعمل التغليب**
   - تأكد من قبول الكوكيز
   - تحقق من تفعيل النظام

3. **مشاكل في الكوكيز**
   - استخدم "🔄 إعادة تعيين" لإعادة تشغيل النظام
   - تحقق من إعدادات المتصفح

### سجلات التصحيح

افتح وحدة تحكم المتصفح (F12) لمراقبة:
- رسائل بدء النظام
- اكتشاف الروابط المنافسة
- عمليات التغليب
- أخطاء النظام

## 🔒 الأمان

### ميزات الأمان

- **SameSite=Strict** لمنع CSRF
- **معاملات مشفرة** في الروابط
- **فحص صحة البيانات** قبل المعالجة
- **حماية من التلاعب** في الكوكيز

### أفضل الممارسات

1. **استخدم HTTPS** دائماً
2. **راقب سجلات النظام** بانتظام
3. **حدث النظام** دورياً
4. **احتفظ بنسخ احتياطية** من الإعدادات

## 📈 التطوير المستقبلي

### ميزات مقترحة

- [ ] **لوحة تحكم متقدمة** مع رسوم بيانية
- [ ] **نظام تنبيهات** للروابط المنافسة
- [ ] **API REST** لإدارة النظام
- [ ] **تطبيق موبايل** للتحكم عن بُعد
- [ ] **تكامل مع منصات** أخرى غير Amazon

### المساهمة

نرحب بالمساهمات! يرجى:
1. **Fork** المشروع
2. **إنشاء branch** للميزة الجديدة
3. **Commit** التغييرات
4. **Push** إلى branch
5. **إنشاء Pull Request**

## 📞 الدعم

### معلومات الاتصال

- **المطور:** نظام إدارة الكوكيز الاحترافي
- **الإصدار:** 2.0.0
- **آخر تحديث:** يناير 2025

### الموارد

- [📖 دليل المستخدم](affiliate_cookie_manager.html)
- [🔧 ملف النظام](amazon_cookie_system.js)
- [❓ الأسئلة الشائعة](#استكشاف-الأخطاء)

## 📄 الترخيص

هذا المشروع مرخص تحت رخصة MIT. راجع ملف LICENSE للتفاصيل.

---

**⭐ إذا أعجبك المشروع، لا تنس إعطاءه نجمة!**